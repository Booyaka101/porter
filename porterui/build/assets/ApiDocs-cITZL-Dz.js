import{c as E,j as e,r as h,B as i,T as o,k as T,I as S,S as G,X as d,af as u,l as C,m as v}from"./index-BR8HzIu-.js";import{E as b}from"./ExpandLess-CoaLL_5p.js";import{C as _}from"./ContentCopy-BXv6Dy4a.js";import{C as f}from"./Chip-CiJfAjDW.js";import{C as y}from"./Collapse-B-GfTmDy.js";const m=E(e.jsx("path",{d:"m14 12-2 2-2-2 2-2zm-2-6 2.12 2.12 2.5-2.5L12 1 7.38 5.62l2.5 2.5zm-6 6 2.12-2.12-2.5-2.5L1 12l4.62 4.62 2.5-2.5zm12 0-2.12 2.12 2.5 2.5L23 12l-4.62-4.62-2.5 2.5zm-6 6-2.12-2.12-2.5 2.5L12 23l4.62-4.62-2.5-2.5z"})),x=[{category:"Machines",endpoints:[{method:"GET",path:"/api/machines",description:"List all machines",response:"[{ id, name, ip, username, status, tags, category }]"},{method:"GET",path:"/api/machines/:id",description:"Get machine details",response:"{ id, name, ip, username, status, tags, category }"},{method:"POST",path:"/api/machines",description:"Add a new machine",body:"{ name, ip, username, password?, key?, tags?, category? }",response:"{ id, name, ip, ... }"},{method:"PUT",path:"/api/machines/:id",description:"Update machine",body:"{ name?, ip?, username?, password?, tags?, category? }"},{method:"DELETE",path:"/api/machines/:id",description:"Delete machine"},{method:"POST",path:"/api/machines/test",description:"Test machine connection",query:"id=<machine_id>",response:"{ success, message }"},{method:"GET",path:"/api/machines/:id/health",description:"Get machine health metrics",response:"{ online, uptime, load_avg, memory_usage, disk_usage }"}]},{category:"Scripts",endpoints:[{method:"GET",path:"/api/scripts",description:"List all scripts",response:"[{ path, name, description, category, is_top_level, is_custom }]"},{method:"GET",path:"/api/scripts/:path",description:"Get script content",response:"{ path, name, content, ... }"},{method:"POST",path:"/api/custom-scripts",description:"Create custom script",body:"{ name, description, content, category? }"},{method:"PUT",path:"/api/custom-scripts/:id",description:"Update custom script",body:"{ name?, description?, content? }"},{method:"DELETE",path:"/api/custom-scripts/:id",description:"Delete custom script"}]},{category:"Script Execution",endpoints:[{method:"POST",path:"/api/run",description:"Execute script on machines",body:"{ script_path, machine_ids[], params? }",response:"{ execution_id }"},{method:"GET",path:"/api/script-executions",description:"List executions",query:"running=true|false",response:"[{ id, script_path, machine_id, status, started_at }]"},{method:"GET",path:"/api/script-executions/:id",description:"Get execution details",response:"{ id, script_path, machine_id, status, output, started_at, finished_at }"},{method:"DELETE",path:"/api/script-executions/:id",description:"Cancel execution"}]},{category:"History",endpoints:[{method:"GET",path:"/api/history",description:"Get execution history",query:"limit=100",response:"{ history: [{ id, script_name, machine_name, status, started_at, duration }] }"},{method:"GET",path:"/api/history/stats",description:"Get history statistics",response:"{ total, successful, failed, avg_duration }"},{method:"DELETE",path:"/api/history",description:"Clear all history"}]},{category:"Terminal",endpoints:[{method:"WS",path:"/api/terminal/:machine_id",description:"WebSocket terminal connection",note:"Bidirectional terminal I/O"},{method:"GET",path:"/api/terminal/recordings/:machine_id",description:"List terminal recordings",response:"[{ id, started_at, duration }]"},{method:"GET",path:"/api/terminal/recordings/:machine_id/:id",description:"Get recording data",response:"{ events: [{ time, data }] }"}]},{category:"Files",endpoints:[{method:"GET",path:"/api/machines/:id/files",description:"List directory contents",query:"path=/home",response:"{ files: [{ name, size, mode, is_dir, mod_time }] }"},{method:"GET",path:"/api/machines/:id/files/download",description:"Download file",query:"path=/path/to/file"},{method:"POST",path:"/api/machines/:id/files/upload",description:"Upload file",body:"multipart/form-data: file, path"},{method:"DELETE",path:"/api/machines/:id/files",description:"Delete file",query:"path=/path/to/file"},{method:"POST",path:"/api/machines/:id/files/mkdir",description:"Create directory",body:"{ path }"}]},{category:"Docker",endpoints:[{method:"GET",path:"/api/machines/:id/docker/containers",description:"List containers",response:"[{ id, name, image, state, status }]"},{method:"POST",path:"/api/machines/:id/docker/containers/:cid/:action",description:"Container action",note:"action: start|stop|restart|remove"},{method:"GET",path:"/api/machines/:id/docker/images",description:"List images",response:"[{ id, tags, size, created }]"},{method:"GET",path:"/api/machines/:id/docker/info",description:"Get Docker info",response:"{ ServerVersion, Containers, Images, ... }"}]},{category:"Services",endpoints:[{method:"GET",path:"/api/machines/:id/services",description:"List systemd services",response:"{ services: [{ name, status, subState, description }] }"},{method:"POST",path:"/api/machines/:id/services/:name/:action",description:"Service action",note:"action: start|stop|restart|enable|disable"},{method:"GET",path:"/api/machines/:id/services/:name/logs",description:"Get service logs",query:"lines=100"}]},{category:"Authentication",endpoints:[{method:"POST",path:"/api/auth/login",description:"User login",body:"{ username, password }",response:"{ token, user }"},{method:"POST",path:"/api/auth/logout",description:"User logout"},{method:"GET",path:"/api/auth/me",description:"Get current user",response:"{ id, username, role, permissions }"}]},{category:"Audit Log",endpoints:[{method:"GET",path:"/api/audit-log",description:"Get audit log entries",query:"category=script",response:"[{ timestamp, user, action, category, machine_name, success }]"}]},{category:"Health",endpoints:[{method:"GET",path:"/api/health/cached",description:"Get cached health for all machines",response:"{ machine_id: { online, uptime, load_avg, ... } }"},{method:"POST",path:"/api/health/refresh",description:"Refresh health data for all machines"}]},{category:"Webhooks",endpoints:[{method:"GET",path:"/api/webhooks",description:"List webhooks",response:"[{ id, name, url, events, enabled }]"},{method:"POST",path:"/api/webhooks",description:"Create webhook",body:"{ name, url, events[], secret? }"},{method:"PUT",path:"/api/webhooks/:id",description:"Update webhook",body:"{ name?, url?, events?, enabled? }"},{method:"DELETE",path:"/api/webhooks/:id",description:"Delete webhook"}]}],g={GET:"#22c55e",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",WS:"#8b5cf6"},L=({endpoint:t})=>{const[r,c]=h.useState(!1),p=n=>{navigator.clipboard.writeText(n)};return e.jsxs(i,{sx:{p:2,borderRadius:"8px",bgcolor:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)","&:hover":{borderColor:"rgba(249, 115, 22, 0.3)"}},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,cursor:"pointer"},onClick:()=>c(!r),children:[e.jsx(f,{label:t.method,size:"small",sx:{bgcolor:`${g[t.method]}20`,color:g[t.method],fontWeight:700,fontFamily:"monospace",minWidth:60}}),e.jsx(o,{sx:{color:"#fafafa",fontFamily:"monospace",fontSize:"0.9rem",flex:1},children:t.path}),e.jsx(C,{title:"Copy path",children:e.jsx(v,{size:"small",onClick:n=>{n.stopPropagation(),p(t.path)},children:e.jsx(_,{sx:{fontSize:16,color:"rgba(255,255,255,0.4)"}})})}),(t.body||t.response||t.query||t.note)&&(r?e.jsx(b,{sx:{color:"rgba(255,255,255,0.4)"}}):e.jsx(u,{sx:{color:"rgba(255,255,255,0.4)"}}))]}),e.jsx(o,{sx:{color:"rgba(255,255,255,0.6)",fontSize:"0.85rem",mt:1},children:t.description}),e.jsx(y,{in:r,children:e.jsxs(i,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1.5},children:[t.query&&e.jsxs(i,{children:[e.jsx(o,{variant:"caption",sx:{color:"#f97316",fontWeight:600},children:"Query Parameters"}),e.jsx(i,{sx:{bgcolor:"rgba(0,0,0,0.3)",p:1.5,borderRadius:1,mt:.5},children:e.jsx(o,{sx:{fontFamily:"monospace",fontSize:"0.8rem",color:"rgba(255,255,255,0.8)"},children:t.query})})]}),t.body&&e.jsxs(i,{children:[e.jsx(o,{variant:"caption",sx:{color:"#3b82f6",fontWeight:600},children:"Request Body"}),e.jsx(i,{sx:{bgcolor:"rgba(0,0,0,0.3)",p:1.5,borderRadius:1,mt:.5},children:e.jsx(o,{sx:{fontFamily:"monospace",fontSize:"0.8rem",color:"rgba(255,255,255,0.8)"},children:t.body})})]}),t.response&&e.jsxs(i,{children:[e.jsx(o,{variant:"caption",sx:{color:"#22c55e",fontWeight:600},children:"Response"}),e.jsx(i,{sx:{bgcolor:"rgba(0,0,0,0.3)",p:1.5,borderRadius:1,mt:.5},children:e.jsx(o,{sx:{fontFamily:"monospace",fontSize:"0.8rem",color:"rgba(255,255,255,0.8)"},children:t.response})})]}),t.note&&e.jsxs(i,{children:[e.jsx(o,{variant:"caption",sx:{color:"#8b5cf6",fontWeight:600},children:"Note"}),e.jsx(o,{sx:{fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",mt:.5},children:t.note})]})]})})]})},D=()=>{const[t,r]=h.useState(""),[c,p]=h.useState(x.reduce((s,a)=>({...s,[a.category]:!0}),{})),n=s=>{p(a=>({...a,[s]:!a[s]}))},l=x.map(s=>({...s,endpoints:s.endpoints.filter(a=>!t||a.path.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.method.toLowerCase().includes(t.toLowerCase()))})).filter(s=>s.endpoints.length>0);return e.jsxs(i,{sx:{p:3,maxWidth:1200,mx:"auto"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,mb:4},children:[e.jsx(i,{sx:{width:56,height:56,borderRadius:"14px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(m,{sx:{color:"#3b82f6",fontSize:28}})}),e.jsxs(i,{children:[e.jsx(o,{variant:"h4",sx:{color:"#fafafa",fontWeight:700},children:"API Documentation"}),e.jsx(o,{sx:{color:"rgba(255,255,255,0.5)"},children:"REST API reference for Porter Script Runner"})]})]}),e.jsx(T,{fullWidth:!0,placeholder:"Search endpoints...",value:t,onChange:s=>r(s.target.value),sx:{mb:3},InputProps:{startAdornment:e.jsx(S,{position:"start",children:e.jsx(G,{sx:{color:"rgba(255,255,255,0.3)"}})})}}),e.jsxs(d,{sx:{p:2,mb:3,bgcolor:"rgba(249, 115, 22, 0.1)",border:"1px solid rgba(249, 115, 22, 0.3)"},children:[e.jsx(o,{variant:"caption",sx:{color:"#f97316",fontWeight:600},children:"Base URL"}),e.jsx(o,{sx:{fontFamily:"monospace",color:"#fafafa",mt:.5},children:window.location.origin})]}),e.jsxs(d,{sx:{p:2,mb:3,bgcolor:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[e.jsx(o,{variant:"caption",sx:{color:"#8b5cf6",fontWeight:600},children:"Authentication"}),e.jsxs(o,{sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",mt:.5},children:["Most endpoints require authentication. Include the session cookie or use the ",e.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:4},children:"Authorization: Bearer <token>"})," header."]})]}),l.map(s=>e.jsxs(d,{sx:{mb:2,bgcolor:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",overflow:"hidden"},children:[e.jsxs(i,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",bgcolor:"rgba(255,255,255,0.02)","&:hover":{bgcolor:"rgba(255,255,255,0.04)"}},onClick:()=>n(s.category),children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(o,{sx:{color:"#fafafa",fontWeight:600,fontSize:"1.1rem"},children:s.category}),e.jsx(f,{label:s.endpoints.length,size:"small",sx:{bgcolor:"rgba(249, 115, 22, 0.2)",color:"#f97316"}})]}),c[s.category]?e.jsx(b,{sx:{color:"rgba(255,255,255,0.5)"}}):e.jsx(u,{sx:{color:"rgba(255,255,255,0.5)"}})]}),e.jsx(y,{in:c[s.category],children:e.jsx(i,{sx:{p:2,display:"flex",flexDirection:"column",gap:1.5},children:s.endpoints.map((a,j)=>e.jsx(L,{endpoint:a},j))})})]},s.category)),l.length===0&&e.jsxs(d,{sx:{p:6,textAlign:"center",bgcolor:"rgba(255,255,255,0.02)"},children:[e.jsx(m,{sx:{fontSize:48,color:"rgba(255,255,255,0.2)",mb:2}}),e.jsxs(o,{sx:{color:"rgba(255,255,255,0.5)"},children:['No endpoints found matching "',t,'"']})]})]})};export{D as default};
